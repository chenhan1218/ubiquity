oem-config (1.17) UNRELEASED; urgency=low

  * Move .glade and .ui files to a new top-level gui directory in the source
    package, and install them under /usr/share/oem-config/glade and
    /usr/share/oem-config/qt respectively.
  * Rename gtk-ui to gtk_ui and kde-ui to kde_ui, to make it easier to
    subclass them.
  * Break up the glade file into multiple pieces to make updates to single
    pages a lot easier (port of work done in ubiquity by Mario Limonciello).
  * Drop into pdb.post_mortem on non-SyntaxError exceptions if the --pdb
    option is given and oem-config is running from a terminal.
  * Fix title of language page: "Choose language and location" no longer
    makes sense now that the location is computed from the timezone.
  * Minor UI tweaks to sync up with ubiquity.

 -- Colin Watson <cjwatson@ubuntu.com>  Mon, 02 Jul 2007 12:45:26 +0100

oem-config (1.16) gutsy; urgency=low

  * Update console-setup component for Lithuanian changes in console-setup
    1.16ubuntu1.
  * Fix desktop file installation.
  * Automatic update of included source packages: console-setup 1.16ubuntu4.

 -- Colin Watson <cjwatson@ubuntu.com>  Mon, 02 Jul 2007 08:54:44 +0100

oem-config (1.15) gutsy; urgency=low

  * Add an oem-config-check udeb to set an "OEM mode (for manufacturers
    only)" info message. OEM mode should now be enabled using
    oem-config/enable=true.
  * Multiply menu-item-numbers by 100.

 -- Colin Watson <cjwatson@ubuntu.com>  Fri, 18 May 2007 17:55:43 +0100

oem-config (1.14) gutsy; urgency=low

  * Add an apport hook to attach /var/log/oem-config.log.
  * Strip binaries.
  * Print usage message and exit if any non-option arguments are supplied to
    oem-config; suggest oem-config-prepare (LP: #105940).
  * Update Japanese keyboard layout handling to match console-setup
    1.7ubuntu18, which uses jp(latin),jp by default (LP: #63915).
  * Teach oem-config-prepare to escalate privileges itself using gksudo,
    kdesu, etc. as appropriate, rather than requiring it to be invoked using
    sudo.
  * Add a desktop icon to the oem user's desktop to run oem-config-prepare
    (LP: #41698).
  * Display an error dialog and exit if running as non-root (LP: #99211).
  * Automatic update of included source packages: console-setup 1.15ubuntu1,
    localechooser 1.38ubuntu1, tzsetup 1:0.17, user-setup 1.14ubuntu1.

 -- Colin Watson <cjwatson@ubuntu.com>  Thu, 17 May 2007 11:43:03 +0100

oem-config (1.13) feisty; urgency=low

  * Display error dialogs on user-setup errors (LP: #94913).

 -- Colin Watson <cjwatson@ubuntu.com>  Thu,  5 Apr 2007 11:38:22 +0100

oem-config (1.12) feisty; urgency=low

  [ Anirudh Ramesh ]
  * Force Qt4 frontend to use Plastique instead of the default Motif style.
  * Add copyright, license and bug contact information.

  [ Colin Watson ]
  * Update other copyright notices.
  * Automatic update of included source packages: console-setup 1.13ubuntu9.

 -- Colin Watson <cjwatson@ubuntu.com>  Wed, 21 Mar 2007 09:45:21 +0000

oem-config (1.11) feisty; urgency=low

  [ Anirudh Ramesh ]
  * Add missing 'import os' to oem-config.
  * Stop using xsetroot in oem-config-dm for KDE, as the KDE frontend now
    sets its own wallpaper.

  [ Colin Watson ]
  * Automatic update of included source packages: user-setup 1.8ubuntu2.

 -- Colin Watson <cjwatson@ubuntu.com>  Thu, 15 Mar 2007 11:41:01 +0000

oem-config (1.10) feisty; urgency=low

  [ Anirudh Ramesh ]
  * Make oem-config-kde depend on python-qt4, not python-kde3.

  [ Colin Watson ]
  * Don't install e-map.defs; it's not all that important and it causes a
    conflict with ubiquity-frontend-gtk.

 -- Colin Watson <cjwatson@ubuntu.com>  Wed, 14 Mar 2007 12:23:51 +0000

oem-config (1.9) feisty; urgency=low

  [ Colin Watson ]
  * Install copyright and changelog files in Architecture: all packages too.
  * Add a 'debian/rules update-local' target to allow updating d-i/source/
    without updating debian/changelog, which is sometimes convenient for
    local hacking.
  * Make OEM_CONFIG_DEBUG=1 imply DEBCONF_DEBUG='developer|filter' for ease
    of debugging.
  * Add a --debug option, equivalent to setting OEM_CONFIG_DEBUG=1.
  * Add timezone widget from ubiquity.
  * Update language, timezone, and keyboard handling code from ubiquity.
  * Move the timezone step before the keyboard step.
  * Apply language, timezone, and keyboard changes at the end of oem-config
    rather than on the fly.
  * Depend on a version of console-setup at least as new as the one in our
    source tree.
  * Track console-setup 1.13ubuntu4 changes by generating and using
    MyKeyboardNames.pl based on xkb-data, which is more up to date than
    KeyboardNames.pl.
  * Stop the user page spreading out in an ugly manner now that the pages
    are bigger. This does result in an unpleasant amount of empty space; the
    page needs a redesign to cope with this.
  * Activate the Forward button when Enter is pressed in any entry field on
    the user page.
  * Leave the UI up until we've finished applying changes; we now have to
    regenerate the initramfs (due to console-setup changes) and it takes a
    while.
  * Send SIGKILL to the window manager if it fails to exit within a second
    of receiving SIGTERM.
  * Automatic update of included source packages: console-setup 1.13ubuntu8,
    localechooser 1.37ubuntu1, tzsetup 1:0.14, user-setup 1.8ubuntu1.

  [ Anirudh Ramesh ]
  * Port KDE frontend to Qt 4.

 -- Colin Watson <cjwatson@ubuntu.com>  Tue, 13 Mar 2007 15:53:32 +0000

oem-config (1.8) edgy; urgency=low

  [ Colin Watson ]
  * Remove /var/lib/kdm/kdmsts in oem-config-firstboot after removing the
    oem user; KDM stores the default user there.
  * Automatic update of included source packages: console-setup 1.7ubuntu19,
    localechooser 1.20ubuntu8, user-setup 1.2ubuntu4.

  [ Anirudh Ramesh ]
  * KDE frontend: Fixed bug where set_country combobox was not being
    updated.

 -- Colin Watson <cjwatson@ubuntu.com>  Sat, 21 Oct 2006 00:36:15 +0100

oem-config (1.7) edgy; urgency=low

  * Add oem-config-udeb/frontend question, defaulting to gtk; preseed this
    to install a different oem-config frontend on the target system (closes:
    Malone #62777).
  * Wait more or less properly by means of SIGUSR1 for the X server to start
    up, rather than arbitrarily sleeping for five seconds.
  * Don't actually import the frontend module in oem-config-dm; merely check
    whether it exists. Otherwise, at least gtk will try to contact the X
    server at import time and get very confused when it predictably isn't
    there (closes: Malone #62814).

 -- Colin Watson <cjwatson@ubuntu.com>  Tue,  3 Oct 2006 22:04:48 +0100

oem-config (1.6) edgy; urgency=low

  * Add /usr/lib/oem-config to sys.path in oem-config-dm so that it can
    import frontend modules.

 -- Colin Watson <cjwatson@ubuntu.com>  Wed, 27 Sep 2006 13:38:57 +0100

oem-config (1.5) edgy; urgency=low

  * Fix syntax error in oem-config-dm.

 -- Colin Watson <cjwatson@ubuntu.com>  Mon, 25 Sep 2006 10:45:58 +0100

oem-config (1.4) edgy; urgency=low

  [ Anirudh Ramesh ]
  * KDE frontend: Reindented to match rest of project.
  * KDE frontend: Fixed crash in set_timezone.

  [ Colin Watson ]
  * Add frontend detection to oem-config-dm, so that KDE support can be
    filled in.

  [ Anirudh Ramesh ]
  * Add KDE support to oem-config-dm.

 -- Colin Watson <cjwatson@ubuntu.com>  Fri, 22 Sep 2006 12:13:59 +0100

oem-config (1.3) edgy; urgency=low

  * Import subprocess in console-setup component (closes: Malone #60409).
  * Fix language name handling (closes: Malone #60410).
  * GTK frontend: Make the Forward button the default widget so that it's
    activated when Enter is pressed.
  * Add kde-ui to default frontend search list.
  * Automatic update of included source packages: console-setup 1.7ubuntu9.

 -- Colin Watson <cjwatson@ubuntu.com>  Mon, 18 Sep 2006 14:26:02 +0100

oem-config (1.2) edgy; urgency=low

  * Merge from ubiquity:
    - Move from kbd-chooser to console-setup
      (https://launchpad.net/distros/ubuntu/+spec/sane-installer-keyboard).
      We still need to add a UI element for the keyboard variant, and
      translations of layout and variant names are missing, but it mostly
      seems to work.
    - Strip Fonts and Keyboard directories from our copy of console-setup;
      they're very large, and not needed since we don't actually build
      console-setup, but just copy a few scripts from it.

 -- Colin Watson <cjwatson@ubuntu.com>  Thu,  7 Sep 2006 20:33:41 +0100

oem-config (1.1) edgy; urgency=low

  * Merge KDE frontend from Anirudh Ramesh.
  * Automatic update of included source packages: kbd-chooser 1.30ubuntu1,
    localechooser 1.20ubuntu6, tzsetup 1:0.10ubuntu2, user-setup 1.2ubuntu3.

 -- Colin Watson <cjwatson@ubuntu.com>  Tue,  5 Sep 2006 17:24:33 +0100

oem-config (1.0) edgy; urgency=low

  * Reorganise oem-config to have a reasonable frontend/backend separation,
    thereby allowing for a future KDE port. This involved updating much of
    the core to look more like ubiquity (since ubiquity's core was an
    evolution of oem-config's), and a new UI using a single window/notebook
    rather than a succession of dialogs.
  * Casualties of this work include the whole base-config-like menu
    structure and the include/exclude mechanism. The menu structure made it
    difficult to avoid spawning a new dialog for each step, which was a poor
    UI; I don't believe the include/exclude mechanism was heavily used, but
    contact me if you were relying on it and it may be possible to restore
    it in a new form.
  * I haven't yet ported the new i18n infrastructure from ubiquity, so the
    oem-config UI will be untranslated.
  * Like ubiquity, we now incorporate source for all d-i components we use
    under d-i/source/ and include them directly in our binary package,
    reducing the number of complex interdependencies with d-i packages.
    'debian/rules update' can be used to do automatic updates of these
    copied source packages.
  * Remove some leftover code that dealt with restoring the inittab, as we
    don't do the temporary inittab thing any more.
  * Fix kbd-chooser wrapper script to actually install the selected keymap
    (though only for the console at present).
  * Move from prebaseconfig to finish-install.
  * Make oem-config Architecture: any, since it now includes kbd-chooser
    binaries.
  * Add an oem-config-gtk package for the GTK frontend.
  * Convert to python-support.
  * Fix apt-install compatibility wrapper to use debconf's noninteractive
    frontend, tell debconf not to send e-mail, avoid upgrading, ignore GPG
    time conflicts, and suppress prompts.
  * Update localechooser wrapper to handle /etc/default/locale (based on
    localechooser 0.19) and to use /usr/share/i18n/SUPPORTED (based on
    localechooser 1.20ubuntu5).
  * Make more of an effort to display translated country names.
  * Use /bin/bash for user-setup due to a dash test(1) bug.
  * Language names are now sorted according to the local name for each
    language (closes: Malone #47724).

 -- Colin Watson <cjwatson@ubuntu.com>  Tue, 22 Aug 2006 16:26:07 +0100

oem-config (0.14) dapper; urgency=low

  * Set LANGUAGE as well as LANG when changing the locale; this allows us to
    get correct debconf translations without needing to run locale-gen (see
    Malone #43071).

 -- Colin Watson <cjwatson@ubuntu.com>  Fri, 12 May 2006 15:27:07 +0100

oem-config (0.13) dapper; urgency=low

  * Depend on xserver-xorg and metacity for oem-config-dm (closes: Malone
    #33837).
  * Depend on user-setup for username/password menu item (closes: Malone
    #33277).

 -- Colin Watson <cjwatson@ubuntu.com>  Thu, 13 Apr 2006 14:13:41 +0100

oem-config (0.12) dapper; urgency=low

  * Make better use of dh_install.
  * Add various helpers in /usr/lib/oem-config/compat, moved here from
    oem-config-locale.

 -- Colin Watson <cjwatson@ubuntu.com>  Tue, 17 Jan 2006 15:33:33 +0000

oem-config (0.11) dapper; urgency=low

  * Add a main-menu step to the udeb which is responsible for arranging to
    create the oem user with a suitable uid. This was formerly done by a
    preseed file.

 -- Colin Watson <cjwatson@ubuntu.com>  Mon, 16 Jan 2006 18:38:37 +0000

oem-config (0.10) dapper; urgency=low

  * Remove unused moduledir variable.
  * Remove passwd menu entry, now moved to user-setup.
  * Build binary package in binary-indep, not binary-arch.
  * We now use a single-stage installer, so we can no longer hook into
    base-config. Add a udeb instead which provides instructions on what to
    do after the first boot, and add an oem-config-prepare program which
    should be run by the OEM once they have completed any necessary
    modifications. Note that this means that the system is no longer
    prepared for the end-user until oem-config-prepare is manually run
    (closes: Malone #28095).
  * Make oem-config-udeb responsible for installing oem-config in /target.
    This will require preseed file changes.
  * Remove timezone menu entry, now moved to oem-config-timezone.

 -- Colin Watson <cjwatson@ubuntu.com>  Mon, 16 Jan 2006 16:20:14 +0000

oem-config (0.9) breezy; urgency=low

  * Quieten output from deluser.
  * Quieten output from debconf-communicate while resetting passwd/user-uid.
  * Try setting LANG to the value of debian-installer/fallbacklocale if the
    value of debian-installer/locale isn't a valid locale (Ubuntu #17366).
  * Set labels in passwd and timezone windows to the translated descriptions
    of the same questions in the installer; sync text of passwd labels with
    the text in passwd.templates (Ubuntu #17366).
  * Re-register passwd/user-fullname and passwd/username templates to
    themselves rather than debian-installer/dummy (although it's a bug
    somewhere in preseeding that they're left this way) so that we get
    useful translated descriptions for them.
  * Set title of timezone window to the translated description of
    tzconfig/title. Unfortunately this is too hard to do for the passwd
    window at present.
  * Exiting oem-config can leave you without a configured user, so try not
    to exit unnecessarily. If we have to, then print an error message with
    instructions and drop the user to a shell, since that's better than a
    login prompt with no users.
  * Reload /var/lib/dpkg/info/base-config.templates for timezone question;
    for some reason the translations seem to be getting lost from it.

 -- Colin Watson <cjwatson@ubuntu.com>  Tue, 11 Oct 2005 21:41:41 +0100

oem-config (0.8) breezy; urgency=low

  * Remove the temporary OEM configuration user before running oem-config.
  * Reset passwd/user-uid before running oem-config, so that the new user is
    created at uid 1000 rather than 29999.

 -- Colin Watson <cjwatson@ubuntu.com>  Mon,  3 Oct 2005 13:04:42 +0100

oem-config (0.7) breezy; urgency=low

  * Use an init script and temporary rc.d links to launch
    oem-config-firstboot on the first boot after installation, rather than a
    temporary inittab. The latter approach caused base-config to be
    respawned after exiting.

 -- Colin Watson <cjwatson@ubuntu.com>  Wed, 21 Sep 2005 12:53:13 +0100

oem-config (0.6) breezy; urgency=low

  * Set passwd and timezone window gravity to center.

 -- Colin Watson <cjwatson@ubuntu.com>  Wed, 14 Sep 2005 13:35:58 +0100

oem-config (0.5) breezy; urgency=low

  * Unset LANGUAGE while running steps; it overrides LANG and thereby causes
    much confusion.
  * Policy version 3.6.2. No changes required.

 -- Colin Watson <cjwatson@ubuntu.com>  Tue,  9 Aug 2005 16:48:08 +0100

oem-config (0.4) breezy; urgency=low

  * Emit a debug message when changing LANG.

 -- Colin Watson <cjwatson@ubuntu.com>  Tue,  9 Aug 2005 16:31:07 +0100

oem-config (0.3) breezy; urgency=low

  * Actually install /usr/sbin/oem-config-firstboot.

 -- Colin Watson <cjwatson@ubuntu.com>  Wed,  3 Aug 2005 20:18:53 +0100

oem-config (0.2) breezy; urgency=low

  * Update GPL notices with the FSF's new address.
  * Add description for base-config menu entry.

 -- Colin Watson <cjwatson@ubuntu.com>  Wed,  3 Aug 2005 11:59:44 +0100

oem-config (0.1) breezy; urgency=low

  * Initial release.

 -- Colin Watson <cjwatson@ubuntu.com>  Fri, 29 Jul 2005 17:24:44 +0100
