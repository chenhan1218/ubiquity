#! /usr/bin/make -f

tmp = $(CURDIR)/debian/oem-config

build:

clean:
	dh_testdir
	dh_testroot
	dh_clean

binary-arch: build
	dh_testdir
	dh_testroot
	dh_clean -k
	dh_installdirs usr/share/oem-config/menu usr/share/debconf/templates \
		usr/share/lintian/overrides
	dh_install oem-config usr/sbin/
	dh_install oem-config-menu usr/share/oem-config/
	dh_install menu/* usr/share/oem-config/menu/
	dh_install pygtk/*.py /usr/lib/oem-config/pygtk/
	dh_install pygtk/steps/*.py pygtk/steps/*.glade \
		/usr/lib/oem-config/pygtk/steps/
	set -e; for x in menu/*.templates; do \
		po2debconf --podir=debian/po $$x \
			> $(tmp)/usr/share/oem-config/menu/$${x##*/}; \
	done
	po2debconf debian/oem-config-menu.templates \
		> $(tmp)/usr/share/debconf/templates/oem-config-menu.templates
	cp debian/lintian-override $(tmp)/usr/share/lintian/overrides/oem-config
	dh_installdocs
	dh_installchangelogs
	dh_compress
	dh_fixperms
	dh_python
	dh_installdeb
	dh_gencontrol
	dh_md5sums
	dh_builddeb

binary-indep:

binary: binary-arch binary-indep

.PHONY: build clean binary-arch binary-indep binary
