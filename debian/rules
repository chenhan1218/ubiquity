#! /usr/bin/make -f

tmp = $(CURDIR)/debian/firstboot

build:

clean:
	dh_testdir
	dh_testroot
	dh_clean

binary-arch: build
	dh_testdir
	dh_testroot
	dh_clean -k
	dh_installdirs usr/share/firstboot/menu usr/share/debconf/templates \
		usr/share/lintian/overrides
	dh_install firstboot firstboot-menu usr/sbin/
	dh_install menu/* usr/share/firstboot/menu/
	set -e; for x in menu/*.templates; do \
		po2debconf --podir=debian/po $$x \
			> $(tmp)/usr/share/firstboot/menu/$${x##*/}; \
	done
	po2debconf debian/firstboot-menu.templates \
		> $(tmp)/usr/share/debconf/templates/firstboot-menu.templates
	cp debian/lintian-override $(tmp)/usr/share/lintian/overrides/firstboot
	dh_installdocs
	dh_installchangelogs
	dh_compress
	dh_fixperms
	dh_installdeb
	dh_gencontrol
	dh_md5sums
	dh_builddeb

binary-indep:

binary: binary-arch binary-indep

.PHONY: build clean binary-arch binary-indep binary
